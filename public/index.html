<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="Big Two Pro Max - å°ˆæ¥­ç´šç·šä¸Šå¤§è€äºŒå°å±€ç³»çµ±">
    <title>BIG OLD TWO</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700;900&family=Noto+Sans+TC:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style.css">
    
    <style>
        /* é€™è£¡æ”¾ä¸€äº›é—œéµçš„è¼‰å…¥å‹•ç•«ï¼Œç¢ºä¿é é¢ä¸é–ƒçˆ */
        #loader {
            position: fixed; inset: 0; background: #050505; 
            display: flex; justify-content: center; align-items: center; z-index: 9999;
            transition: opacity 0.5s;
        }
        .spinner {
            width: 50px; height: 50px; border: 3px solid rgba(212, 175, 55, 0.3);
            border-top-color: #d4af37; border-radius: 50%; animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="loader"><div class="spinner"></div></div>

    <div id="lobby" class="lobby-screen">
        <div class="lobby-box">
            <header class="title-area">
                <h1>BIG TWO <span>PRO</span></h1>
                <p>ULTIMATE MULTIPLAYER EXPERIENCE</p>
            </header>

            <div class="input-container">
                <div class="field-group">
                    <label for="nick">ç©å®¶æš±ç¨±</label>
                    <input type="text" id="nick" placeholder="è¼¸å…¥æˆ°é¬¥ä»£è™Ÿ..." maxlength="10">
                </div>
                
                <div class="field-group">
                    <label for="rid">æˆ¿é–“è™Ÿç¢¼</label>
                    <input type="text" id="rid" placeholder="ä¾‹å¦‚: 888" maxlength="6">
                </div>

                <div class="field-group">
                    <label for="pwd">æˆ¿é–“å¯†ç¢¼ (é¸å¡«)</label>
                    <input type="password" id="pwd" placeholder="SECURITY KEY">
                </div>
            </div>

            <div class="auth-btns">
                <button class="btn-lobby join" onclick="handleAuth('join')">
                    <span class="icon">â¡ï¸</span> é€²å…¥æˆ¿é–“
                </button>
                <button class="btn-lobby create" onclick="handleAuth('create')">
                    <span class="icon">â•</span> å»ºç«‹æˆ¿é–“
                </button>
            </div>

            <footer class="lobby-footer">
                <small>å•Šå“ˆå“ˆå“ˆå“ˆ ä½ å€‹å°èœé€¼</small>
            </footer>
        </div>
    </div>

    <div id="app" class="app-wrapper" style="display: none;">
        
        <header class="header-nav">
            <div class="brand-logo">
                <span class="gold-text">ROOM:</span>
                <span id="room-id-display" class="id-badge">---</span>
            </div>
            
            <div id="player-chips" class="player-status-row">
                </div>

            <div class="sys-controls">
                <button class="icon-btn" title="è¨­ç½®" onclick="toggleSettings()">âš™ï¸</button>
            </div>
        </header>

        <section class="main-content">
            
            <aside class="side-panel">
                <div class="log-header">
                    <span class="log-title">å°å±€å¯¦æ™‚ç´€éŒ„</span>
                    <button class="clear-btn" onclick="clearLogs()">æ¸…é™¤</button>
                </div>
                <div id="log-list" class="log-box">
                    </div>
            </aside>

            <main class="table-field">
                <div id="system-hint" class="hint-banner">ç­‰å¾…ç©å®¶å…¥åº§ä¸­...</div>
                
                <div class="table-center">
                    <div class="played-cards-wrapper">
                        <div id="table-cards" class="card-group table-cards">
                            </div>
                    </div>
                    <div id="move-type" class="move-type-badge">READY</div>
                </div>

                <div class="master-controls">
                    <button id="start-btn" class="btn-primary-glow" style="display: none;" onclick="handleStart()">
                        å•Ÿå‹•å°å±€ START GAME
                    </button>
                </div>

                <div id="result-overlay" class="settlement-overlay" style="display: none;">
                    <div class="result-content">
                        <div class="crown-icon">ğŸ‘‘</div>
                        <h2 id="winner-text" class="result-title">WINNER!</h2>
                        <div id="score-board" class="score-board">
                            </div>
                        <div class="result-actions">
                            <button id="retry-btn" class="btn-lobby join" style="display: none;" onclick="handleStart()">
                                å†æˆ°ä¸€å±€ PLAY AGAIN
                            </button>
                            <button class="btn-lobby create" onclick="location.reload()">
                                é›¢é–‹æˆ¿é–“ LEAVE
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </section>

        <section class="player-dashboard">
            
            <div class="quick-tools">
                <div class="tool-group">
                    <button class="tool-btn" onclick="smartPick('SINGLE')">å–®å¼µ</button>
                    <button class="tool-btn" onclick="smartPick('PAIR')">å°å­</button>
                    <button class="tool-btn" onclick="smartPick('HOUSE')">è‘«è˜†</button>
                    <button class="tool-btn" onclick="smartPick('STRAIGHT')">é †å­</button>
                </div>
                <div class="tool-divider"></div>
                <div class="tool-group">
                    <button class="tool-btn accent" onclick="sortCards()">è‡ªå‹•æ’åº</button>
                    <button class="tool-btn accent" onclick="state.selectedCards=[]; renderHand();">å–æ¶ˆé¸æ“‡</button>
                </div>
            </div>

            <div class="bottom-player-area">
                <div id="hand-cards" class="card-group player-hand">
                    </div>

                <div class="action-row">
                    <button id="pass-btn" class="btn-game pass" onclick="handlePass()" disabled>
                        PASS <small>è·³éæ­¤è¼ª</small>
                    </button>
                    <button id="play-btn" class="btn-game play" onclick="handlePlay()" disabled>
                        PLAY CARDS <small>å‡ºç‰Œå°æ±º</small>
                    </button>
                </div>
            </div>
        </section>
    </div>

    <div id="notification-toast" class="toast"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/rule.js"></script>
    <script src="js/app.js"></script>

    <script>
        // é é¢åŠ è¼‰å®Œæˆå¾Œéš±è— Loader
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            loader.style.opacity = '0';
            setTimeout(() => loader.style.display = 'none', 500);
        });

        // è¼”åŠ©åŠŸèƒ½ï¼šæ¸…ç©ºæ—¥èªŒ
        function clearLogs() {
            document.getElementById('log-list').innerHTML = '<div style="color: #555">æ—¥èªŒå·²æ¸…ç©º</div>';
        }

        // è¼”åŠ©åŠŸèƒ½ï¼šè¨­å®šè¦–çª— (æ¨¡æ“¬)
        function toggleSettings() {
            alert("å°ˆæ¥­ç‰ˆè¨­ç½®åŠŸèƒ½ï¼š\n1. éŸ³æ•ˆé–‹é—œ (é–‹ç™¼ä¸­)\n2. ç‰ŒèƒŒæ¨£å¼åˆ‡æ›\n3. æˆ¿é–“éš±ç§è¨­å®š");
        }
    </script>
</body>
</html>
